<html>
    <head>
        <link rel="stylesheet" href="style.css">
        <title>Halting Solution</title>
    </head>

    <body>
		<h1 class="title"><a href="index.html" style="color: black; text-decoration: none; ">Halting Solution</a></h1>
        <div class ="container">
				<div class="content mono">
             <b><a href="pico8.html"><- Back to pico-8 demos</a></b><br><br>
			 I know someone who is an elementary school teacher, and she told me her student Jovan loved video games but struggled to find the motivation to study for his state exams. 
			 I offered to make a small game to help encourage him.
			 <br><br>
			 I like the assets for this game, I may eventually re-use them for something else down the road.<br><br>
			</div>
		</div>
		<center>
            <div class=center style="border:0px;overflow:hidden; position:relative;" leftmargin=0 topmargin=0> 
                <div id="plate" class=plate oncontextmenu="return false;">
                <!-- the itch app messes with the first found canvas -->
                <canvas id="dummy4itchapp" style="position:absolute;visibility:hidden;width:0;height:0;"></canvas>
                <div id="frame" class=center style="visibility:hidden;"> <!-- firefox can't resize a fullscreen canvas (?)-->
                <canvas class="emscripten pixels" id="canvas" oncontextmenu="event.preventDefault()" tabindex="1"></canvas>
                </div>
                <div id="start" class="startbutton pixels" onclick="loadCart();">
                <img alt="START" height=72 src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAaklEQVR4Ae2dOwoAMQhE15A+rfc/3bZ7AlMnQfywCkKsfcgMM9ZP+QHtIn0vLeBAFduiFdQ/0DmvtR5LXJ6CPSXe2ZXcFNlTxFbemKrbZPs35XogeS9xeQr+anT6LzoOwEDwZJ7jwhXUnwkTTiDQ2Ja34AAAABB0RVh0TG9kZVBORwAyMDExMDIyMeNZtsEAAAAASUVORK5CYII="/>
            </div>
    
            <div id="menubar" class=menubar>
                <div class=pico8_el onclick="Module.pico8Reset();">
                <img alt="Reset" height=12 src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAaklEQVR4Ae2dOwoAMQhE15A+rfc/3bZ7AlMnQfywCkKsfcgMM9ZP+QHtIn0vLeBAFduiFdQ/0DmvtR5LXJ6CPSXe2ZXcFNlTxFbemKrbZPs35XogeS9xeQr+anT6LzoOwEDwZJ7jwhXUnwkTTiDQ2Ja34AAAABB0RVh0TG9kZVBORwAyMDExMDIyMeNZtsEAAAAASUVORK5CYII="/>
                </div>
        
                <div class=pico8_el onclick="Module.pico8TogglePaused();">
                <img alt="Pause" height=12 src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAPUlEQVR4Ae3doQ0AIAxEUWABLPtPh2WCq26DwFSU/JPNT166QSu/Hg86W9dwLte+diP7AwAAAAAAgD+A+jM2ZAgo84I0PgAAABB0RVh0TG9kZVBORwAyMDExMDIyMeNZtsEAAAAASUVORK5CYII="/>
                </div>
        
                <div class=pico8_el onclick="toggleFullscreen();">
                <img alt="Fullscreen" height=12 src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAaklEQVR4Ae2dsQ1AIQhExfze1v2ns3UCrfgFhmgUUAoGgHscp21wX9BqaZoDojbB96OkDJKNcTN2BHTyYNYmoT2BlPL7BKgcPfHjAVXKKadkHOn9K1r16N0czN6a95N8mnA7Aq2fTZ3Af3UKmCSMazL8HwAAABB0RVh0TG9kZVBORwAyMDExMDIyMeNZtsEAAAAASUVORK5CYII="/>
                </div>
        
                <div class=pico8_el onclick="Module.pico8ToggleSound();">
                <img alt="Toggle Sound" height=12 src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAXklEQVR4Ae2doQ4AIQxD4YLH8v9fh+ULhjpxxSwLg2uyapr1JRu1iV5Z+1BGl4+xNpX38SYo2uRvYiT5LwEmt+ocgXVLrhPEgBiw8Q5w7/kueSkK+D2tJO4E/I3GrwkqQCBabEj/4QAAABB0RVh0TG9kZVBORwAyMDExMDIyMeNZtsEAAAAASUVORK5CYII="/>
                </div>
        
                <a class=pico8_el target="_new" href="http://www.lexaloffle.com/bbs/?cat=7&sub=2" >
                <img  alt="More Carts" height=12 src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAlElEQVR4Ae2dMQ5FQBCGh6jcwAkkateg3DiAa+iQUGqVKi95FQfAJRQOoHeBUf8JyQqKjZ1uMzuz2e/LTE3KhyF7kSlgLOykas23f6D+A9Yp84aAOYU15pcJnfji0Il2ID8HzC4y38ZrnfIBGxeRoR3c3EWrACdsV5BOsx7OSRnrOXh4F5HzA6bevwUn8wlz7eCDsQM99B3ks0s/4QAAABB0RVh0TG9kZVBORwAyMDExMDIyMeNZtsEAAAAASUVORK5CYII="/>
                </a>
        
			</div>
			
			</center>
			<center>
					Click the power button icon to start the game. Controls: z x and the arrow keys.<br>
			</center>
            </div>
    </body>
</html>

<script type="text/javascript">
//many thanks to ultrabrite for this template
// see url -- https://www.lexaloffle.com/bbs/?tid=31000

	var autoresize=false; // enables autoresize. duh.
	var autoplay=true; // enables autoplay when possible.
	var canvas = document.getElementById("canvas");
	var plate = document.getElementById("plate");
	var Module = {};
	Module.canvas = canvas;

	function onKeyDown_blocker(event) {
		event = event || window.event;
		var o = document.activeElement;
		if (!o || o == document.body || o.tagName == "canvas" || o.tagName == "CANVAS")
		{
			if ([9, 32, 37, 38, 39, 40].indexOf(event.keyCode) > -1)
			{
				if (event.preventDefault) event.preventDefault();
			}
		}
	}

	document.addEventListener('keydown', onKeyDown_blocker, false);

	//------------------------- RESIZE

	function resizeCanvas()
	{
		var csize=512;
		var width=window.innerWidth,height=window.innerHeight;
		var fs=(document.fullscreenElement || document.mozFullScreenElement || document.webkitIsFullScreen || document.msFullscreenElement);
		if (autoresize || fs)
		{
			if (!fs) height-=32; //keep room for buttons
			csize=Math.max(128,Math.min(Math.floor(width/128)*128,Math.floor(height/128)*128));
		}

		plate.style.visibility="visible";//graceful resizing on load
		plate.style.width=csize; // otherwise larger buttons but black side bars with autoresize (stylish?)
		canvas.style.width = csize;
		canvas.style.height = csize;
		window.focus();
	}

	window.addEventListener('load', resizeCanvas, false);
	window.addEventListener('resize', resizeCanvas, false);
	window.addEventListener('orientationchange', resizeCanvas, false);
	window.addEventListener('fullscreenchange', resizeCanvas, false);
	window.addEventListener('webkitfullscreenchange', resizeCanvas, false);//for itch.app

	//------------------------- FULLSCREEN

	function toggleFullscreen()
	{
		var frame = document.getElementById("frame");//firefox won't resize a fullscreen canvas, so let's fullscreen its frame instead

		if (document.fullscreenElement || document.mozFullScreenElement || document.webkitIsFullScreen || document.msFullscreenElement)
		{//exit fs
			frame.cancelFullscreen = frame.cancelFullscreen || frame.mozCancelFullScreen || frame.webkitCancelFullScreen;
			frame.cancelFullscreen();
		}
		else
		{//enter fs
			frame.requestFullscreen = frame.requestFullscreen || frame.mozRequestFullScreen || frame.webkitRequestFullScreen;
			frame.requestFullscreen();
		}
	}

	// ==========================================================================================
	// chrome autoplay policy may2018
	// ==========================================================================================

	var cartLoaded=false;

	function loadCart()
	{
		if (cartLoaded) return;
		document.getElementById("start").style.visibility="hidden";
		document.getElementById("frame").style.visibility="visible";

		var script = document.createElement('script');
		script.type='text/javascript';
		script.async=true;
		script.src="jovan.js";

		var loadFunction = function ()
		{
			cartLoaded=true;
			document.getElementById("menubar").style.visibility="visible";
			resizeCanvas();
		}
		script.onload = loadFunction;
		script.onreadystatechange = loadFunction;

		var s = document.getElementsByTagName('script')[0];
		s.parentNode.insertBefore(script,s);
	};

	if (autoplay)
	{
		var context = new AudioContext();
		context.onstatechange = function ()
		{
			if (context.state=='running')
			{
				loadCart();
				context.close();
			}
		};
	}

</script>